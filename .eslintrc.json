{
  "env": {
    "node": true,
    "es2021": true,
    "browser": true,
    "jquery": true
  },
  "extends": [
    "airbnb-base",
    "plugin:security/recommended"
  ],
  "parserOptions": {
    "ecmaVersion": 2021,
    "sourceType": "script"
  },
  "plugins": [
    "security"
  ],
  "globals": {
    "Alpine": "readonly",
    "gtag": "readonly",
    "showAlert": "readonly",
    "showModal": "readonly",
    "showConfirmModal": "readonly",
    "convertFlashMessages": "readonly"
  },
  "rules": {
    // ===== DESIGN SYSTEM RULES =====
    "no-inline-comments": "warn",
    "max-len": ["warn", { "code": 120, "ignoreUrls": true, "ignoreStrings": true }],
    
    // ===== SECURITY RULES =====
    "no-eval": "error",
    "no-implied-eval": "error",
    "no-new-func": "error",
    "security/detect-object-injection": "off",
    "security/detect-non-literal-fs-filename": "warn",
    
    // ===== CONSOLE RULES (TILOS PRODUCTION-BEN) =====
    "no-console": ["error", { 
      "allow": ["warn", "error"] 
    }],
    
    // ===== ERROR HANDLING =====
    "no-unused-vars": ["error", { 
      "argsIgnorePattern": "^_",
      "varsIgnorePattern": "^_"
    }],
    "prefer-promise-reject-errors": "error",
    "no-throw-literal": "error",
    
    // ===== BEST PRACTICES =====
    "no-var": "error",
    "prefer-const": "error",
    "prefer-arrow-callback": "warn",
    "arrow-body-style": ["warn", "as-needed"],
    "no-param-reassign": ["error", { "props": false }],
    
    // ===== ASYNC/AWAIT =====
    "no-await-in-loop": "warn",
    "require-await": "warn",
    
    // ===== IMPORTS =====
    "import/no-unresolved": "off",
    "import/extensions": "off",
    "import/prefer-default-export": "off",
    
    // ===== NODE.JS SPECIFIC =====
    "global-require": "off",
    "consistent-return": "warn",
    
    // ===== RELAXED RULES (kezdetben) =====
    "comma-dangle": ["warn", "only-multiline"],
    "quotes": ["warn", "single", { "avoidEscape": true }],
    "semi": ["warn", "always"],
    "indent": ["warn", 2],
    "no-trailing-spaces": "warn",
    "eol-last": "warn",
    "object-curly-spacing": ["warn", "always"]
  },
  "ignorePatterns": [
    "node_modules/",
    "backup_manual/",
    "backups/",
    "public/js/lib/**",
    "public/js/vendor/**",
    "public/js/external/**",
    "dist/",
    "build/",
    "coverage/",
    "*.min.js"
  ],
  "overrides": [
    {
      "files": ["public/js/**/*.js", "views/**/*.js"],
      "rules": {
        "no-undef": "off",
        "func-names": "off",
        "prefer-arrow-callback": "off"
      }
    },
    {
      "files": ["routes/**/*.js", "services/**/*.js", "models/**/*.js"],
      "rules": {
        "no-console": ["error", { "allow": ["warn", "error"] }]
      }
    }
  ]
}
