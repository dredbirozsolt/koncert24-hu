<!-- Social Media Settings Page -->
<div class="page-container">
    <div class="admin-two-col">
        
        <!-- Bal oldal: Social Media Links -->
        <div>
            <div class="card--data">
                <h3 class="section-title">
                    üîó K√∂z√∂ss√©gi M√©dia Linkek
                </h3>
                
                <form id="social-form">
                    <div class="form__group">
                        <label for="social.facebook">
                            üìò Facebook
                        </label>
                        <input 
                            type="url" 
                            name="social.facebook" 
                            id="social.facebook"
                            class="form__control"
                            value="<%= flatSettings['social.facebook'] || '' %>"
                            placeholder="https://www.facebook.com/yourpage"
                        >
                        <small class="form__hint">A Facebook oldal teljes URL-je</small>
                    </div>

                    <div class="form__group">
                        <label for="social.instagram">
                            üì∑ Instagram
                        </label>
                        <input 
                            type="url" 
                            name="social.instagram" 
                            id="social.instagram"
                            class="form__control"
                            value="<%= flatSettings['social.instagram'] || '' %>"
                            placeholder="https://www.instagram.com/yourprofile"
                        >
                        <small class="form__hint">Az Instagram profil teljes URL-je</small>
                    </div>

                    <div class="form__group">
                        <label for="social.tiktok">
                            üéµ TikTok
                        </label>
                        <input 
                            type="url" 
                            name="social.tiktok" 
                            id="social.tiktok"
                            class="form__control"
                            value="<%= flatSettings['social.tiktok'] || '' %>"
                            placeholder="https://www.tiktok.com/@yourhandle"
                        >
                        <small class="form__hint">A TikTok profil teljes URL-je</small>
                    </div>

                    <div class="form__group">
                        <label for="social.linkedin">
                            üíº LinkedIn
                        </label>
                        <input 
                            type="url" 
                            name="social.linkedin" 
                            id="social.linkedin"
                            class="form__control"
                            value="<%= flatSettings['social.linkedin'] || '' %>"
                            placeholder="https://www.linkedin.com/company/yourcompany"
                        >
                        <small class="form__hint">A LinkedIn v√°llalati oldal URL-je</small>
                    </div>

                    <div class="form__group">
                        <label for="social.youtube">
                            üì∫ YouTube
                        </label>
                        <input 
                            type="url" 
                            name="social.youtube" 
                            id="social.youtube"
                            class="form__control"
                            value="<%= flatSettings['social.youtube'] || '' %>"
                            placeholder="https://www.youtube.com/@yourchannel"
                        >
                        <small class="form__hint">A YouTube csatorna teljes URL-je</small>
                    </div>

                    <div class="btn__group btn__group--equal mb-4">
                        <button type="button" class="btn btn--primary" onclick="saveSocial()">
                            üíæ Ment√©s
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Jobb oldal: Info Panel -->
        <div>
            <!-- Tippek -->
            <div class="card--data">
                <h3 class="section-title">
                    ‚ÑπÔ∏è Haszn√°lati √∫tmutat√≥
                </h3>
                
                <div>
                    <p>
                        <strong>üì± Linkek megjelen√©se:</strong><br>
                        A megadott linkek a weboldal l√°bl√©c√©ben jelennek meg k√∂z√∂ss√©gi m√©dia ikonokk√©nt.
                    </p>
                    
                    <p>
                        <strong>üîó URL form√°tum:</strong><br>
                        Mindig a teljes URL-t add meg, a <code>https://</code> el≈ëtaggal egy√ºtt.
                    </p>
                    
                    <p>
                        <strong>‚úì Ellen≈ërz√©s:</strong><br>
                        Ment√©s ut√°n ellen≈ërizd, hogy a linkek helyesen m≈±k√∂dnek-e a publikus oldalon.
                    </p>
                    
                    <p>
                        <strong>üéØ √úresen hagy√°s:</strong><br>
                        Ha egy platformot nem haszn√°lsz, hagyd √ºresen a mez≈ët - nem fog megjelenni az oldalon.
                    </p>
                </div>
            </div>

            <!-- El≈ën√©zet -->
            <div class="card--data mt-3">
                <h3 class="section-title">
                    üëÅÔ∏è Kit√∂lt√∂tt platformok
                </h3>
                
                <div id="filled-platforms">
                    <!-- JavaScript √°ltal gener√°lt lista -->
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript -->
<script>
    const csrfToken = '<%= csrfToken %>';

    // Kit√∂lt√∂tt platformok el≈ën√©zete
    function updateFilledPlatforms() {
        const platforms = [
            { id: 'social.facebook', name: 'Facebook', icon: 'üìò', color: '#1877f2' },
            { id: 'social.instagram', name: 'Instagram', icon: 'üì∑', color: '#e4405f' },
            { id: 'social.tiktok', name: 'TikTok', icon: 'üéµ', color: '#000000' },
            { id: 'social.linkedin', name: 'LinkedIn', icon: 'üíº', color: '#0077b5' },
            { id: 'social.youtube', name: 'YouTube', icon: 'üì∫', color: '#ff0000' }
        ];

        const container = document.getElementById('filled-platforms');
        const filled = platforms.filter(p => {
            const input = document.getElementById(p.id);
            return input && input.value.trim() !== '';
        });

        if (filled.length === 0) {
            container.innerHTML = '<p>M√©g nincs kit√∂lt√∂tt platform</p>';
        } else {
            container.innerHTML = filled.map(p => `
                <div>
                    <i class="${p.icon}"></i>
                    <span>${p.name}</span>
                    ‚úì </div>
            `).join('');
        }
    }

    // Input mez≈ëk figyel√©se
    document.addEventListener('DOMContentLoaded', () => {
        const inputs = ['social.facebook', 'social.instagram', 'social.tiktok', 'social.linkedin', 'social.youtube'];
        inputs.forEach(id => {
            const input = document.getElementById(id);
            if (input) {
                input.addEventListener('input', updateFilledPlatforms);
            }
        });
        updateFilledPlatforms();
    });

    // Save social media links
    async function saveSocial() {
        const form = document.getElementById('social-form');
        const formData = new FormData(form);
        
        // Convert FormData to settings object
        const settingsObj = {};
        for (const [key, value] of formData.entries()) {
            settingsObj[key] = value;
        }
        
        try {
            const response = await fetch('/admin/social/save', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRF-Token': csrfToken
                },
                body: JSON.stringify({ settings: settingsObj })
            });
            
            const data = await response.json();
            
            if (data.success) {
                showAlert('success', `‚úÖ ${data.message || 'Sikeresen mentve!'}`);
                updateFilledPlatforms();
            } else {
                showAlert('error', `‚ùå ${data.message || 'Hiba t√∂rt√©nt a ment√©s sor√°n'}`);
            }
        } catch (error) {
            showAlert('error', `‚ùå H√°l√≥zati hiba: ${error.message}`);
        }
    }

    // ‚úÖ DESIGN SYSTEM: Uses global showAlert() from admin-alerts.js
</script>
