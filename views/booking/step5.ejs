<%
  const performer = locals.performer || {};
  const bookingData = locals.bookingData || {};
  const basePath = locals.basePath || '/';
%>

<main class="quote-wizard">
  <div class="quote-wizard__container">
    
    <!-- Progress Bar -->
    <div class="quote-wizard__progress">
      <div class="quote-wizard__progress-bar">
        <div class="quote-wizard__progress-fill progress-83"></div>
      </div>
      <div class="quote-wizard__progress-text">5. l√©p√©s / 6</div>
    </div>

      <!-- Back Button -->
      <a href="<%= basePath %>foglalas/<%= performer.slug %>?step=4" class="btn btn--secondary mb-6">
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"/>
        </svg>
        Vissza az el≈ëz≈ë l√©p√©shez
      </a>

      <!-- Performer Card (Mini) -->
      <div class="quote-wizard__performer-card">
        <% if (performer.imageUrl) { %>
          <img src="<%= performer.imageUrl %>" alt="<%= performer.name %>" class="quote-wizard__performer-image">
        <% } %>
        <div class="quote-wizard__performer-info">
          <h3 class="quote-wizard__performer-name"><%= performer.name %></h3>
          <% if (performer.performanceType) { %>
            <span class="quote-wizard__performer-type"><%= performer.performanceType %></span>
          <% } %>
        </div>
      </div>

      <!-- Step Title -->
      <h1 class="quote-wizard__title">Sz√°ml√°z√°si √©s egy√©b adatok</h1>
      <p class="quote-wizard__subtitle">Utols√≥ l√©p√©s a foglal√°s el≈ëtt</p>

      <!-- Form -->
      <form id="bookingStep5Form" method="POST" action="<%= basePath %>foglalas/<%= performer.slug %>?step=6" class="quote-wizard__form">
        
        <!-- Billing Email -->
        <div class="form-group">
          <label for="billingEmail" class="form-label">
            üìß Sz√°ml√°z√°si e-mail c√≠m <span class="required">*</span>
          </label>
          <input 
            type="email" 
            id="billingEmail" 
            name="billingEmail" 
            class="form-input" 
            placeholder="szamla@email.hu"
            value="<%= bookingData.billingEmail || '' %>"
            required>
          <span class="form-hint">Erre a c√≠mre k√ºldj√ºk a sz√°ml√°t</span>
        </div>

        <!-- Notes / Special Requests -->
        <div class="form-group">
          <label for="notes" class="form-label">
            üìù Megjegyz√©s / Egy√©b k√©r√©s
            <span class="optional">(opcion√°lis)</span>
          </label>
          <textarea 
            id="notes" 
            name="notes" 
            class="form-textarea" 
            placeholder="K√ºl√∂nleges k√©r√©sek, technikai ig√©nyek, parkol√°s..."
            maxlength="500"
            rows="5"><%= bookingData.notes || '' %></textarea>
          <span class="form-hint">üí¨ Ide √≠rhatja a k√ºl√∂nleges k√©r√©seit, pl. technikai ig√©ny, fell√©p√©si helysz√≠n bej√°r√°s, parkol√°s stb. (max. 500 karakter)</span>
        </div>

        <!-- Submit Button -->
        <div class="form-actions form-actions--split">
          <a href="<%= basePath %>foglalas/<%= performer.slug %>?step=4" class="btn btn--secondary btn--large">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"/>
            </svg>
            Vissza az el≈ëz≈ë l√©p√©shez
          </a>
          <button type="submit" class="btn btn--primary btn--large">
            Tov√°bb az √∂sszegz√©shez
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
            </svg>
          </button>
        </div>

      </form>

    </div>
  </main>

  <!-- Custom CSS for this page -->
  <link rel="stylesheet" href="<%= basePath %>css/pages/quote-wizard.css">
  
  <!-- Custom JS for this page -->
  <script src="<%= basePath %>js/pages/quote-wizard.js"></script>
