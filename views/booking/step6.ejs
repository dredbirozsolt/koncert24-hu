<%
  const performer = locals.performer || {};
  const bookingData = locals.bookingData || {};
  const basePath = locals.basePath || '/';
  
  // Event type translations
  const eventTypeLabels = {
    'private': 'Mag√°nrendezv√©ny',
    'corporate': 'C√©ges rendezv√©ny',
    'wedding': 'Esk√ºv≈ë',
    'festival': 'Fesztiv√°l',
    'concert': 'Koncert',
    'birthday': 'Sz√ºlet√©snap',
    'outdoor_paid': 'Szabadt√©ri fizet≈ës rendezv√©ny',
    'outdoor_free': 'Szabadt√©ri ingyenes rendezv√©ny',
    'indoor_paid': 'Belt√©ri fizet≈ës rendezv√©ny',
    'indoor_free': 'Belt√©ri ingyenes rendezv√©ny',
    'private_personal': 'Z√°rtk√∂r≈± mag√°nrendezv√©ny',
    'private_corporate': 'Z√°rtk√∂r≈± c√©ges rendezv√©ny',
    'community': 'K√∂z√∂ss√©gi rendezv√©ny',
    'other': 'Egy√©b'
  };
  
  const eventTypeDisplay = eventTypeLabels[bookingData.eventType] || bookingData.eventType || '-';
%>

<main class="quote-wizard">
  <div class="quote-wizard__container">
    
    <!-- Progress Bar -->
    <div class="quote-wizard__progress">
      <div class="quote-wizard__progress-bar">
        <div class="quote-wizard__progress-fill progress-100"></div>
      </div>
      <div class="quote-wizard__progress-text">6. l√©p√©s / 6</div>
    </div>

      <!-- Back Button -->
      <a href="<%= basePath %>foglalas/<%= performer.slug %>?step=5" class="btn btn--secondary mb-6">
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"/>
        </svg>
        Vissza az el≈ëz≈ë l√©p√©shez
      </a>

      <!-- Performer Card (Mini) -->
      <div class="quote-wizard__performer-card">
        <% if (performer.imageUrl) { %>
          <img src="<%= performer.imageUrl %>" alt="<%= performer.name %>" class="quote-wizard__performer-image">
        <% } %>
        <div class="quote-wizard__performer-info">
          <h3 class="quote-wizard__performer-name"><%= performer.name %></h3>
          <% if (performer.performanceType) { %>
            <span class="quote-wizard__performer-type"><%= performer.performanceType %></span>
          <% } %>
        </div>
      </div>

      <!-- Step Title -->
      <h1 class="quote-wizard__title">Foglal√°s √∂sszegz√©se</h1>
      <p class="quote-wizard__subtitle">K√©rj√ºk, ellen≈ërizd az adatokat miel≈ëtt elk√ºld√∂d</p>

      <!-- Summary Sections -->
      <div class="summary">
        
        <!-- Event Details -->
        <div class="summary-section">
          <h3 class="summary-section__title">üìÖ Esem√©ny r√©szletei</h3>
          <dl class="summary-list">
            <div class="summary-item">
              <dt>D√°tum:</dt>
              <dd>
                <%= bookingData.eventDate || '-' %>
                <% if (bookingData.eventDateFlexible && bookingData.eventDate) { %>
                  <span class="text-muted"> (M√©g nem fix a d√°tum)</span>
                <% } %>
              </dd>
            </div>
            <div class="summary-item">
              <dt>Id≈ëpont:</dt>
              <dd>
                <% if (bookingData.eventTimeFlexible) { %>
                  <%= bookingData.eventTime || '-' %> <span class="text-muted">(M√©g nem fix az id≈ëpont)</span>
                <% } else { %>
                  <%= bookingData.eventTime || '-' %>
                <% } %>
              </dd>
            </div>
            <div class="summary-item">
              <dt>Helysz√≠n:</dt>
              <dd><%= bookingData.eventLocation || '-' %></dd>
            </div>
            <div class="summary-item">
              <dt>Pontos c√≠m:</dt>
              <dd><%= bookingData.venueAddress || '-' %></dd>
            </div>
            <div class="summary-item">
              <dt>Esem√©ny neve:</dt>
              <dd><%= bookingData.eventName || '-' %></dd>
            </div>
            <div class="summary-item">
              <dt>Esem√©ny t√≠pusa:</dt>
              <dd><%= eventTypeDisplay %></dd>
            </div>
            <div class="summary-item">
              <dt>Vend√©gsz√°m:</dt>
              <dd><%= bookingData.guestCount || '-' %></dd>
            </div>
          </dl>
          <a href="<%= basePath %>foglalas/<%= performer.slug %>?step=1" class="summary-edit">Szerkeszt√©s</a>
        </div>

        <!-- Contact Info -->
        <div class="summary-section">
          <h3 class="summary-section__title">üë§ Kapcsolattart√≥</h3>
          <dl class="summary-list">
            <div class="summary-item">
              <dt>N√©v:</dt>
              <dd><%= bookingData.contactName || '-' %></dd>
            </div>
            <div class="summary-item">
              <dt>E-mail:</dt>
              <dd><%= bookingData.contactEmail || '-' %></dd>
            </div>
            <div class="summary-item">
              <dt>Telefon:</dt>
              <dd><%= bookingData.contactPhone || '-' %></dd>
            </div>
          </dl>
          <a href="<%= basePath %>foglalas/<%= performer.slug %>?step=2" class="summary-edit">Szerkeszt√©s</a>
        </div>

        <!-- Client Data -->
        <div class="summary-section">
          <h3 class="summary-section__title">üßæ Megrendel≈ë adatai</h3>
          <dl class="summary-list">
            <div class="summary-item">
              <dt>N√©v / C√©gn√©v:</dt>
              <dd><%= bookingData.clientName || '-' %></dd>
            </div>
            <div class="summary-item">
              <dt>Sz√©khely:</dt>
              <dd><%= bookingData.clientAddress || '-' %></dd>
            </div>
            <div class="summary-item">
              <dt>Ad√≥sz√°m:</dt>
              <dd><%= bookingData.taxNumber || '-' %></dd>
            </div>
            <% if (bookingData.registrationNumber) { %>
            <div class="summary-item">
              <dt>C√©gjegyz√©ksz√°m:</dt>
              <dd><%= bookingData.registrationNumber %></dd>
            </div>
            <% } %>
            <div class="summary-item">
              <dt>K√©pvisel≈ë / Anyja neve:</dt>
              <dd><%= bookingData.representativeName || '-' %></dd>
            </div>
          </dl>
          <a href="<%= basePath %>foglalas/<%= performer.slug %>?step=3" class="summary-edit">Szerkeszt√©s</a>
        </div>

        <!-- Contacts -->
        <div class="summary-section">
          <h3 class="summary-section__title">üìá Kapcsolattart√≥k</h3>
          
          <h4 class="mt-4 mb-2 font-semibold">Rendezv√©ny napi kapcsolattart√≥:</h4>
          <dl class="summary-list">
            <div class="summary-item">
              <dt>N√©v:</dt>
              <dd><%= bookingData.eventDayContactName || '-' %></dd>
            </div>
            <div class="summary-item">
              <dt>E-mail:</dt>
              <dd><%= bookingData.eventDayContactEmail || '-' %></dd>
            </div>
            <div class="summary-item">
              <dt>Telefon:</dt>
              <dd><%= bookingData.eventDayContactPhone || '-' %></dd>
            </div>
          </dl>
          
          <h4 class="mt-6 mb-2 font-semibold">Technikai kapcsolattart√≥:</h4>
          <dl class="summary-list">
            <div class="summary-item">
              <dt>N√©v:</dt>
              <dd><%= bookingData.techContactName || '-' %></dd>
            </div>
            <div class="summary-item">
              <dt>E-mail:</dt>
              <dd><%= bookingData.techContactEmail || '-' %></dd>
            </div>
            <div class="summary-item">
              <dt>Telefon:</dt>
              <dd><%= bookingData.techContactPhone || '-' %></dd>
            </div>
          </dl>
          
          <a href="<%= basePath %>foglalas/<%= performer.slug %>?step=4" class="summary-edit">Szerkeszt√©s</a>
        </div>

        <!-- Billing -->
        <div class="summary-section">
          <h3 class="summary-section__title">üìß Sz√°ml√°z√°s</h3>
          <dl class="summary-list">
            <div class="summary-item">
              <dt>Sz√°ml√°z√°si e-mail:</dt>
              <dd><%= bookingData.billingEmail || '-' %></dd>
            </div>
            <% if (bookingData.notes) { %>
            <div class="summary-item">
              <dt>Megjegyz√©s:</dt>
              <dd><%= bookingData.notes %></dd>
            </div>
            <% } %>
          </dl>
          <a href="<%= basePath %>foglalas/<%= performer.slug %>?step=5" class="summary-edit">Szerkeszt√©s</a>
        </div>

      </div>

      <!-- Action Buttons -->
      <form id="bookingStep6Form" class="quote-wizard__form" method="POST" action="<%= basePath %>foglalas/<%= performer.slug %>/confirm">
        
        <!-- Privacy Consent -->
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" name="privacyConsent" id="privacyConsent" required>
            <span>Elfogadom az <a href="<%= basePath %>info/adatkezeles" target="_blank" class="privacy-link">adatkezel√©si t√°j√©koztat√≥t</a> √©s hozz√°j√°rulok szem√©lyes adataim kezel√©s√©hez a foglal√°s elk√©sz√≠t√©se c√©lj√°b√≥l.</span>
          </label>
        </div>

        <div class="form-actions form-actions--split">
          <a href="<%= basePath %>foglalas/<%= performer.slug %>?step=4" class="btn btn--secondary btn--large">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"/>
            </svg>
            M√≥dos√≠t√°s
          </a>
          <button type="submit" class="btn btn--primary btn--large">
            üîµ Foglal√°s elk√ºld√©se
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
          </button>
        </div>
        
        <p class="form-info">
          üîí A foglal√°s meger≈ës√≠t√©s√©t e-mailben k√ºldj√ºk el. Az adatok alapj√°n elk√©sz√≠tj√ºk a szerz≈ëd√©st.
        </p>
      </form>

    </div>
  </main>

  <!-- Custom CSS for this page -->
  <link rel="stylesheet" href="<%= basePath %>css/pages/quote-wizard.css">
  
  <!-- Custom JS for this page -->
  <script src="<%= basePath %>js/pages/quote-wizard.js"></script>
