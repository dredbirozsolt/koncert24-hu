<!-- Auth reset password with Design System -->

<section class="section">
    <div class="max-w-md mx-auto">
        <div class="card">
            <div class="card__header text-center">
                <h1 class="card__title text-2xl">üîê √öj jelsz√≥ be√°ll√≠t√°sa</h1>
                <p class="text-sm text-gray-600 mt-2">Adj meg egy √∫j, biztons√°gos jelsz√≥t</p>
            </div>

            <div class="card__body">
                <% if (typeof error !== 'undefined' && error) { %>
                    <div class="alert alert--error mb-6">
                        <div class="alert__icon">‚ùå</div>
                        <div class="alert__content">
                            <p class="alert__message">
                                <% if (error === 'invalid_token') { %>
                                    √ârv√©nytelen vagy lej√°rt helyre√°ll√≠t√°si link. K√©rj √∫j linket.
                                <% } else if (error === 'passwords_no_match') { %>
                                    A jelszavak nem egyeznek meg.
                                <% } else if (error === 'password_too_short') { %>
                                    A jelsz√≥ t√∫l r√∂vid. Minimum 8 karakter sz√ºks√©ges.
                                <% } else if (error === 'password_weak') { %>
                                    A jelsz√≥nak tartalmaznia kell kis- √©s nagybet≈±t, valamint legal√°bb egy sz√°mot.
                                <% } else if (error === 'server') { %>
                                    Szerver hiba. K√©rj√ºk, pr√≥b√°ld meg k√©s≈ëbb.
                                <% } else { %>
                                    Hiba t√∂rt√©nt. K√©rj√ºk, pr√≥b√°ld meg √∫jra.
                                <% } %>
                            </p>
                        </div>
                    </div>
                <% } %>

                <% if (typeof success !== 'undefined' && success) { %>
                    <div class="alert alert--success mb-6">
                        <div class="alert__icon">‚úÖ</div>
                        <div class="alert__content">
                            <p class="alert__message">
                                <strong>Jelsz√≥ sikeresen megv√°ltoztatva!</strong><br>
                                Most bejelentkezhetsz az √∫j jelsz√≥val.
                            </p>
                        </div>
                    </div>
                <% } %>

                <div class="alert alert--info mb-6">
                    <div class="alert__icon">üîí</div>
                    <div class="alert__content">
                        <p class="alert__message">
                            <strong>Jelsz√≥ k√∂vetelm√©nyek:</strong>
                        </p>
                        <ul class="list-disc ml-5 mt-2 space-y-1 text-sm">
                            <li>Minimum 6 karakter hossz√∫</li>
                            <li>Tartalmazzon nagy- √©s kisbet≈±ket</li>
                            <li>Haszn√°lj sz√°mokat is</li>
                            <li>Ker√ºld a k√∂nnyen kital√°lhat√≥ jelszavakat</li>
                        </ul>
                    </div>
                </div>

                <% if (!success) { %>
                <form method="POST" action="<%= basePath %>auth/reset-password">
                    <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                    <input type="hidden" name="token" value="<%= token %>">
                    
                    <div class="form__group">
                        <label for="password" class="form__label">üîê √öj jelsz√≥</label>
                        <input 
                            type="password" 
                            id="password" 
                            name="password" 
                            class="form__input" 
                            required 
                            minlength="6"
                            placeholder="Add meg az √∫j jelsz√≥t"
                            autofocus
                        >
                    </div>

                    <div class="form__group">
                        <label for="confirmPassword" class="form__label">üîê Jelsz√≥ meger≈ës√≠t√©se</label>
                        <input 
                            type="password" 
                            id="confirmPassword" 
                            name="confirmPassword" 
                            class="form__input" 
                            required 
                            minlength="6"
                            placeholder="Er≈ës√≠tsd meg az √∫j jelsz√≥t"
                        >
                    </div>

                    <button type="submit" class="btn btn--primary w-full">
                        üíæ Jelsz√≥ ment√©se
                    </button>
                </form>
                <% } %>
            </div>

            <div class="card__footer border-t text-center">
                <div class="space-y-2">
                    <% if (success) { %>
                        <p class="text-sm">
                            <a href="<%= basePath %>auth/login" class="text-primary hover:underline font-semibold">
                                üö™ Bejelentkez√©s az √∫j jelsz√≥val
                            </a>
                        </p>
                    <% } else { %>
                        <p class="text-sm">
                            <a href="<%= basePath %>auth/forgot-password" class="text-primary hover:underline">
                                üîë √öj helyre√°ll√≠t√°si link k√©r√©se
                            </a>
                        </p>
                    <% } %>
                    <p class="text-sm text-gray-600">
                        <a href="<%= basePath %>auth/login" class="text-primary hover:underline">
                            üîô Vissza a bejelentkez√©shez
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>
